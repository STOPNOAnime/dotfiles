#!/bin/bash


# remove bloat
sudo dnf remove -y gnome-contacts gnome-maps gnome-tour gnome-weather gnome-software yelp

# load dconf
# dconf.ini hash: {{ include "dconf.ini" | sha256sum }}
dconf load / < {{ joinPath .chezmoi.sourceDir "dconf.ini" | quote }}

# set wallpaper
{{ $wallpaper_uri := print "file://" (joinPath .chezmoi.sourceDir "wallpaper.jpg") }}
gsettings set org.gnome.desktop.background picture-uri {{ $wallpaper_uri }}
gsettings set org.gnome.desktop.background picture-uri-dark {{ $wallpaper_uri }}
gsettings set org.gnome.desktop.screensaver picture-uri {{ $wallpaper_uri }}

# set user image
sudo cp {{ joinPath .chezmoi.sourceDir "user.icon" | quote }} /var/lib/AccountsService/icons/{{ .chezmoi.username }}